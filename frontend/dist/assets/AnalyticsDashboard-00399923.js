import{h as j,l as e,n as u,L as T,j as M,r as c,z as y,s as $}from"./index-55320310.js";import{E as U,a as w,A,T as C}from"./TopPerformingBlogs-2a80b4d7.js";import{E as I}from"./eye-7cfc2af4.js";import{H as q,M as V}from"./message-circle-c3254eb4.js";import{B as H}from"./bar-chart-3-5daf79b5.js";import{T as F}from"./trending-up-6d855027.js";import"./share-2-8a4bcd4d.js";import"./file-text-bf5ff692.js";import"./clock-25d4086b.js";const g=j("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),z=j("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),J=j("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Z=j("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),P=({data:a,sortBy:r,sortOrder:h,onSortChange:x})=>{const p=s=>s>=10?"text-green-600 bg-green-50":s>=5?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",f=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),o=s=>{x(s,r===s&&h==="desc"?"asc":"desc")},l=s=>r!==s?e.jsx(g,{className:"w-4 h-4 text-gray-400"}):e.jsx(g,{className:`w-4 h-4 ${h==="desc"?"text-blue-600 rotate-180":"text-blue-600"}`});return a.blogs.length===0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Blog Performance"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total: 0 blogs"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("button",{className:"flex items-center space-x-1 hover:text-gray-700",children:e.jsx("span",{children:"Title"})})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:e.jsxs("button",{className:"flex items-center space-x-1 hover:text-gray-700",children:[e.jsx("span",{children:"Views"}),e.jsx(g,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:e.jsxs("button",{className:"flex items-center space-x-1 hover:text-gray-700",children:[e.jsx("span",{children:"Likes"}),e.jsx(g,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",children:e.jsxs("button",{className:"flex items-center space-x-1 hover:text-gray-700",children:[e.jsx("span",{children:"Comments"}),e.jsx(g,{className:"h-3 w-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white",children:e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[e.jsx(J,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"No blogs yet"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Create your first blog to see performance metrics"})]})})})]})}),e.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:"0"})," to"," ",e.jsx("span",{className:"font-medium",children:"0"})," of"," ",e.jsx("span",{className:"font-medium",children:"0"})," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{disabled:!0,className:"px-3 py-1 text-sm bg-gray-100 text-gray-400 rounded cursor-not-allowed",children:"Previous"}),e.jsx("span",{className:"px-3 py-1 text-sm bg-blue-50 text-blue-600 rounded",children:"1"}),e.jsx("button",{disabled:!0,className:"px-3 py-1 text-sm bg-gray-100 text-gray-400 rounded cursor-not-allowed",children:"Next"})]})]})]}):e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Blog Performance"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",a.blogs.length," of ",a.pagination.totalBlogs," blogs"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Blog"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>o("views"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Views"}),l("views")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>o("likes"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Likes"}),l("likes")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>o("comments"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Comments"}),l("comments")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>o("createdAt"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Date"}),l("createdAt")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.blogs.map((s,i)=>e.jsxs(u.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:i*.05},className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:s.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.readingTime," min read"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.metrics.views.toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.metrics.likes.toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.metrics.comments.toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded ${p(s.metrics.engagementRate)}`,children:[s.metrics.engagementRate.toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:f(s.publishedAt)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(T,{to:`/blog/${s.slug}`,className:"text-gray-400 hover:text-blue-600 transition-colors",title:"View blog",children:e.jsx(U,{className:"w-4 h-4"})})})]},s._id))})]})}),a.pagination.totalPages>1&&e.jsx("div",{className:"px-6 py-3 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",a.pagination.currentPage," of ",a.pagination.totalPages]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.pagination.totalBlogs," total blogs"]})]})})]})},te=()=>{const{user:a}=M(),[r,h]=c.useState(null),[x,p]=c.useState(null),[f,o]=c.useState(!0),[l,s]=c.useState(!1),[i,v]=c.useState("overview"),[b,L]=c.useState("views"),[N,D]=c.useState("desc");c.useEffect(()=>{a&&k()},[a]);const k=async()=>{try{o(!0);const[t,n]=await Promise.all([w.getAnalyticsOverview(),w.getAllBlogsAnalytics({page:1,limit:10,sortBy:b,sortOrder:N})]);h(t),p(n)}catch(t){console.error("Error fetching analytics:",t),y.error("Failed to load analytics data")}finally{o(!1)}},O=async()=>{s(!0),await k(),s(!1),y.success("Analytics data refreshed")},R=()=>{if(!r||!x)return;const t={overview:r.overview,topBlogs:r.topPerformingBlogs,recentActivity:r.recentActivity,allBlogs:x.blogs,exportedAt:new Date().toISOString()},n=JSON.stringify(t,null,2),d=new Blob([n],{type:"application/json"}),S=URL.createObjectURL(d),m=document.createElement("a");m.href=S,m.download=`analytics-${a==null?void 0:a.username}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(S),y.success("Analytics data exported successfully")},B=async(t,n)=>{L(t),D(n);try{const d=await w.getAllBlogsAnalytics({page:1,limit:10,sortBy:t,sortOrder:n});p(d)}catch(d){console.error("Error fetching blogs analytics:",d),y.error("Failed to update blogs data")}};if(f)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx($,{})});if(!r){const t={overview:{totalBlogs:0,totalViews:0,totalLikes:0,totalComments:0,totalShares:0,publishedBlogs:0,draftBlogs:0,pendingBlogs:0,rejectedBlogs:0,avgViewsPerBlog:0,avgLikesPerBlog:0,avgCommentsPerBlog:0,engagementRate:0},topPerformingBlogs:[],recentActivity:{newBlogs:0,newLikes:0,newComments:0}},n={blogs:[],pagination:{currentPage:1,totalPages:0,totalBlogs:0,hasNextPage:!1,hasPrevPage:!1}};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Track your blog performance and engagement metrics"})]}),e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>v("overview"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="overview"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Overview"}),e.jsx("button",{onClick:()=>v("blogs"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="blogs"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Blog Performance"})]})}),e.jsxs("div",{className:"space-y-6",children:[i==="overview"&&e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsx(A,{overview:t.overview}),e.jsx(C,{blogs:t.topPerformingBlogs})]}),i==="blogs"&&e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(P,{data:n,sortBy:b,sortOrder:N,onSortChange:B})})]})]})})}const E=[{id:"overview",label:"Overview",icon:H},{id:"blogs",label:"Blog Performance",icon:F}];return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Track your blog performance and engagement metrics"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:O,disabled:l,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(Z,{className:`w-4 h-4 mr-2 ${l?"animate-spin":""}`}),l?"Refreshing...":"Refresh"]}),e.jsxs("button",{onClick:R,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]}),e.jsx("div",{className:"mt-6 border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:E.map(t=>{const n=t.icon;return e.jsxs("button",{onClick:()=>v(t.id),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${i===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(n,{className:"w-5 h-5 mr-2"}),t.label]},t.id)})})})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[i==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(A,{overview:r.overview}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(C,{blogs:r.topPerformingBlogs}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity (30 days)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Blogs"}),e.jsx("span",{className:"font-semibold text-gray-900",children:r.recentActivity.newBlogs})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Likes"}),e.jsx("span",{className:"font-semibold text-gray-900",children:r.recentActivity.newLikes})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"New Comments"}),e.jsx("span",{className:"font-semibold text-gray-900",children:r.recentActivity.newComments})]})]})]})]})]}),i==="blogs"&&x&&e.jsx(P,{data:x,sortBy:b,sortOrder:N,onSortChange:B})]},i)]})})};export{te as default};
//# sourceMappingURL=AnalyticsDashboard-00399923.js.map
