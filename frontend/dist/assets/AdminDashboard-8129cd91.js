import{h as me,t as p,r as d,l as e,A as I,n as y,X as ee,U as R,E as se,z as G,j as xe,L as U,s as P,S as W}from"./index-f61b2bac.js";import{C as D}from"./calendar-482486aa.js";import{C as F}from"./clock-11a32587.js";import{E}from"./eye-87bbbeff.js";import{T as he}from"./tag-60b6c369.js";import{P as pe}from"./pen-line-116e5239.js";import{U as K}from"./users-f1970731.js";import{F as Q}from"./file-text-437e2c53.js";import{X as ue}from"./x-circle-c1da7bba.js";import{C as ge}from"./check-circle-e85157be.js";import{T as ye}from"./trending-up-41dd6549.js";import{T as je}from"./trash-2-94fe8f75.js";const te=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),B={getDashboardStats:async()=>(await p.get("/admin/dashboard")).data,getPendingBlogs:async()=>(await p.get("/admin/blogs/pending")).data.blogs||[],getRecentUsers:async(t=10)=>(await p.get(`/admin/users/recent?limit=${t}`)).data.users||[],getAllUsers:async(t={})=>(await p.get("/admin/users",t)).data,getAllBlogs:async(t={})=>(await p.get("/admin/blogs",t)).data,reviewBlog:async(t,r)=>(await p.put(`/admin/blogs/${t}/review`,r)).data.blog,toggleBlogFeatured:async t=>p.put(`/admin/blogs/${t}/featured`),toggleBlogVisibility:async t=>p.put(`/admin/blogs/${t}/visibility`),deleteBlog:async t=>p.delete(`/admin/blogs/${t}`),toggleUserStatus:async t=>p.put(`/admin/users/${t}/status`),changeUserRole:async(t,r)=>p.put(`/admin/users/${t}/role`,{role:r}),getReportedComments:async(t=1,r=20)=>(await p.get("/admin/comments/reported",{page:t,limit:r})).data,moderateComment:async(t,r)=>p.put(`/admin/comments/${t}/moderate`,{action:r})},fe=({blog:t,isOpen:r,onClose:m})=>{var o,j,C;const w=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});d.useEffect(()=>{const n=u=>{u.key==="Escape"&&m()};return r&&(document.addEventListener("keydown",n),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",n),document.body.style.overflow="unset"}},[r,m]);const x=e.jsx(I,{children:r&&e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50",onClick:m}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"​"}),e.jsxs(y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"relative inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle bg-white shadow-2xl rounded-2xl z-[10000]",style:{transform:"translateZ(0)"},onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Blog Preview"}),e.jsx("button",{onClick:m,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(ee,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[t.featuredImage&&e.jsx("div",{className:"w-full h-64 rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:t.featuredImage,alt:t.title,className:"w-full h-full object-cover"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:((o=t.author)==null?void 0:o.fullName)||((j=t.author)==null?void 0:j.username)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:w(t.createdAt)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.readingTime||5," min read"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsxs("span",{children:[((C=t.metrics)==null?void 0:C.views)||0," views"]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.status==="approved"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":t.status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.status})]}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tags:"}),t.tags.map(n=>e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md flex items-center",children:[e.jsx(he,{className:"h-3 w-3 mr-1 text-gray-500"}),"#",n]},n))]})]}),t.excerpt&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Excerpt:"}),e.jsx("p",{className:"text-gray-700 italic",children:t.excerpt})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Content:"}),e.jsx("div",{className:"prose max-w-none text-gray-700 leading-relaxed",style:{whiteSpace:"pre-wrap"},children:t.content.length>1e3?`${t.content.substring(0,1e3)}...`:t.content}),t.content.length>1e3&&e.jsx("p",{className:"text-sm text-gray-500 mt-4 italic",children:"Content truncated for preview. Full content will be visible after approval."})]}),t.adminNotes&&e.jsxs("div",{className:`p-4 rounded-lg border ${t.status==="rejected"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[e.jsx("h3",{className:`text-sm font-medium mb-2 ${t.status==="rejected"?"text-red-900":"text-blue-900"}`,children:t.status==="rejected"?"Rejection Reason:":"Admin Notes:"}),e.jsx("p",{className:`${t.status==="rejected"?"text-red-700":"text-blue-700"}`,children:t.adminNotes})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t",children:[e.jsx("button",{onClick:m,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Close Preview"}),e.jsx("a",{href:`/blog/${t.slug}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors",children:"View Full Blog"})]})]})]})})});return typeof document<"u"?se.createPortal(x,document.body):null},be=({isOpen:t,onClose:r,onConfirm:m,blogTitle:w,isLoading:x=!1})=>{const[o,j]=d.useState("");d.useEffect(()=>{const h=T=>{T.key==="Escape"&&!x&&n()};return t&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}},[t,x]);const C=h=>{if(h.preventDefault(),!o.trim()){G.error("Please provide a reason for rejection");return}if(o.trim().length<10){G.error("Rejection reason must be at least 10 characters");return}m(o.trim())},n=()=>{x||(j(""),r())},u=e.jsx(I,{children:t&&e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50",onClick:n}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"​"}),e.jsxs(y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"relative inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle bg-white shadow-2xl rounded-2xl z-[10000]",style:{transform:"translateZ(0)"},onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(te,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Reject Blog"})]}),e.jsx("button",{onClick:n,disabled:x,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(ee,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"You are about to reject the blog:"}),e.jsxs("p",{className:"font-medium text-gray-900 mb-4 p-3 bg-gray-50 rounded-lg",children:['"',w,'"']}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a clear reason for rejection. This will be shown to the author."}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"reason",rows:4,value:o,onChange:h=>j(h.target.value),placeholder:"Please explain why this blog is being rejected...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none",disabled:x,maxLength:500}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[o.length,"/500 characters (minimum 10 characters)"]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:n,disabled:x,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x||!o.trim()||o.trim().length<10,className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Rejecting..."})]}):e.jsx("span",{children:"Reject Blog"})})]})]})]})]})]})})});return typeof document<"u"?se.createPortal(u,document.body):null},Te=()=>{var Z,J,q;const{user:t}=xe(),[r,m]=d.useState(null),[w,x]=d.useState([]),[o,j]=d.useState([]),[C,n]=d.useState([]),[u,h]=d.useState("overview"),[T,z]=d.useState(!0),[f,k]=d.useState(null),[c,M]=d.useState(""),[S,ae]=d.useState("all"),[H,O]=d.useState(null),[re,V]=d.useState(!1),[A,$]=d.useState({isOpen:!1,blog:null});d.useEffect(()=>{(t==null?void 0:t.role)==="admin"&&le()},[t]);const le=async()=>{try{z(!0);const[a,s,l,i]=await Promise.all([B.getDashboardStats(),B.getPendingBlogs(),B.getAllBlogs({status:"approved",limit:50}),B.getRecentUsers()]);m(a),x(s),j(l.blogs||[]),n(i)}catch(a){console.error("Error fetching dashboard data:",a)}finally{z(!1)}},X=async(a,s,l)=>{try{k(a),await B.reviewBlog(a,{status:s==="approve"?"approved":"rejected",adminNotes:l||""}),x(w.filter(i=>i._id!==a)),r&&m({...r,overview:{...r.overview,pendingBlogs:r.overview.pendingBlogs-1,publishedBlogs:s==="approve"?r.overview.publishedBlogs+1:r.overview.publishedBlogs}})}catch(i){console.error(`Error ${s}ing blog:`,i)}finally{k(null)}},L=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Y=a=>{O(a),V(!0)},ie=()=>{V(!1),O(null)},ne=async a=>{A.blog&&(await X(A.blog._id,"reject",a),$({isOpen:!1,blog:null}))},ce=a=>{$({isOpen:!0,blog:a})},de=async a=>{if(window.confirm("Are you sure you want to hide this blog from public view? You can always show it again later."))try{k(a),await B.toggleBlogVisibility(a),j(o.filter(s=>s._id!==a)),r&&m({...r,overview:{...r.overview,publishedBlogs:r.overview.publishedBlogs-1}})}catch(s){console.error("Error hiding blog:",s),alert("Failed to hide blog. Please try again.")}finally{k(null)}},oe=async a=>{if(window.confirm("Are you sure you want to permanently delete this blog? This action cannot be undone."))try{k(a),await B.deleteBlog(a),j(o.filter(s=>s._id!==a)),r&&m({...r,overview:{...r.overview,publishedBlogs:r.overview.publishedBlogs-1}})}catch(s){console.error("Error deleting blog:",s),alert("Failed to delete blog. Please try again.")}finally{k(null)}},_=a=>{switch(a){case"approved":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"rejected":return"text-red-600 bg-red-100";case"draft":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}};return(t==null?void 0:t.role)!=="admin"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(te,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access the admin dashboard."}),e.jsx(U,{to:"/",className:"bg-gray-900 text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Go Home"})]})}):T?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(P,{size:"lg"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center overflow-hidden",children:t!=null&&t.avatar?e.jsx("img",{src:t.avatar,alt:t.fullName,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-white text-lg font-semibold",children:(Z=t==null?void 0:t.fullName)==null?void 0:Z.charAt(0).toUpperCase()})}),e.jsx(U,{to:"/admin/profile",className:"absolute -bottom-1 -right-1 bg-white rounded-full p-1 shadow-md border border-gray-200 hover:bg-gray-50 transition-colors",title:"Edit avatar",children:e.jsx(pe,{className:"h-3 w-3 text-gray-600"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",t==null?void 0:t.fullName," • Manage blogs, users, and platform analytics"]})]})]})}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs(U,{to:"/admin/profile",className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit Profile"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8 justify-items-center max-w-5xl mx-auto",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg p-6 border border-gray-200 w-full max-w-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.overview.totalUsers})]})]})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg p-6 border border-gray-200 w-full max-w-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Published Blogs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.overview.publishedBlogs})]})]})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg p-6 border border-gray-200 w-full max-w-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.overview.pendingBlogs})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>h("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>h("pending"),className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="pending"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending Blogs (",w.length,")"]}),e.jsxs("button",{onClick:()=>h("published"),className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="published"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Published Blogs (",o.length,")"]}),e.jsx("button",{onClick:()=>h("users"),className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Recent Users"})]})}),e.jsxs("div",{className:"p-6",children:[u==="overview"&&r&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Blogs"}),e.jsx("div",{className:"space-y-3",children:r.recentActivity.recentBlogs.slice(0,5).map(a=>{var s,l;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["by"," ",((s=a.author)==null?void 0:s.fullName)||((l=a.author)==null?void 0:l.username)]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_(a.status)}`,children:a.status})]},a._id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Users"}),e.jsx("div",{className:"space-y-3",children:r.recentActivity.recentUsers.slice(0,5).map(a=>{var s,l;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-medium",children:((s=a.firstName)==null?void 0:s.charAt(0))||((l=a.username)==null?void 0:l.charAt(0))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.fullName||a.username}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Joined ",L(a.createdAt)]})]})]},a._id)})})]})]})}),u==="pending"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search blogs...",value:c,onChange:a=>M(a.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),e.jsxs("select",{value:S,onChange:a=>ae(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),(()=>{const a=w.filter(s=>{var g,b,v,N;const l=c===""||s.title.toLowerCase().includes(c.toLowerCase())||s.content.toLowerCase().includes(c.toLowerCase())||((b=(g=s.author)==null?void 0:g.fullName)==null?void 0:b.toLowerCase().includes(c.toLowerCase()))||((N=(v=s.author)==null?void 0:v.username)==null?void 0:N.toLowerCase().includes(c.toLowerCase())),i=S==="all"||s.status===S;return l&&i});return a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c||S!=="all"?"No matching blogs":"No pending blogs"}),e.jsx("p",{className:"text-gray-600",children:c||S!=="all"?"Try adjusting your search or filter criteria":"All blogs have been reviewed!"})]}):e.jsx("div",{className:"space-y-4",children:a.map(s=>{var l,i;return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_(s.status)}`,children:s.status})]}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:s.excerpt||s.content.substring(0,200)+"..."}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 mb-4",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:((l=s.author)==null?void 0:l.fullName)||((i=s.author)==null?void 0:i.username)})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:L(s.createdAt)})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.readingTime," min read"]})]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.slice(0,5).map(g=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-md text-xs",children:g},g))})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>Y(s),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Preview Blog →"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>ce(s),disabled:f===s._id,className:"inline-flex items-center px-3 py-1.5 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 disabled:opacity-50",children:f===s._id?e.jsx(P,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"Reject"]})}),e.jsx("button",{onClick:()=>X(s._id,"approve"),disabled:f===s._id,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:f===s._id?e.jsx(P,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"Approve"]})})]})]})]},s._id)})})})()]}),u==="published"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search published blogs...",value:c,onChange:a=>M(a.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})})}),(()=>{const a=o.filter(s=>{var i,g,b,v,N;return c===""||s.title.toLowerCase().includes(c.toLowerCase())||((i=s.content)==null?void 0:i.toLowerCase().includes(c.toLowerCase()))||((b=(g=s.author)==null?void 0:g.fullName)==null?void 0:b.toLowerCase().includes(c.toLowerCase()))||((N=(v=s.author)==null?void 0:v.username)==null?void 0:N.toLowerCase().includes(c.toLowerCase()))});return a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c?"No matching blogs":"No published blogs"}),e.jsx("p",{className:"text-gray-600",children:c?"Try adjusting your search criteria":"No blogs have been published yet"})]}):e.jsx("div",{className:"space-y-4",children:a.map(s=>{var l,i,g,b,v;return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_(s.status)}`,children:s.status}),s.isFeatured&&e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:"Featured"})]}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:s.excerpt||((l=s.content)==null?void 0:l.substring(0,200))+"..."}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 mb-4",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:((i=s.author)==null?void 0:i.fullName)||((g=s.author)==null?void 0:g.username)})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:L(s.publishedAt||s.createdAt)})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsxs("span",{children:[((b=s.metrics)==null?void 0:b.views)||0," views"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsxs("span",{children:[((v=s.metrics)==null?void 0:v.likes)||0," likes"]})]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.slice(0,5).map(N=>e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-md text-xs",children:N},N))})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>Y(s),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Preview Blog →"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>de(s._id),disabled:f===s._id,className:"inline-flex items-center px-3 py-1.5 border border-yellow-300 text-sm font-medium rounded-md text-yellow-700 bg-white hover:bg-yellow-50 disabled:opacity-50",title:"Hide this blog from public view",children:f===s._id?e.jsx(P,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),"Hide"]})}),e.jsx("button",{onClick:()=>oe(s._id),disabled:f===s._id,className:"inline-flex items-center px-3 py-1.5 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 disabled:opacity-50",title:"Permanently delete this blog",children:f===s._id?e.jsx(P,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-4 w-4 mr-1"}),"Delete"]})})]})]})]},s._id)})})})()]}),u==="users"&&e.jsx("div",{className:"space-y-4",children:C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600",children:"No recent user activity."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(a=>{var s,l,i;return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:((s=a.firstName)==null?void 0:s.charAt(0))||((l=a.username)==null?void 0:l.charAt(0))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.fullName||a.username}),e.jsxs("p",{className:"text-sm text-gray-600",children:["@",a.username]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Email:"}),e.jsx("span",{className:"truncate ml-2",children:a.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Joined:"}),e.jsx("span",{children:L(a.createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Blogs:"}),e.jsx("span",{children:((i=a.stats)==null?void 0:i.totalBlogs)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:a.isActive?"text-green-600":"text-red-600",children:a.isActive?"Active":"Inactive"})]})]})]},a._id)})})})]})]})]}),H&&e.jsx(fe,{blog:H,isOpen:re,onClose:ie}),e.jsx(be,{isOpen:A.isOpen,onClose:()=>$({isOpen:!1,blog:null}),onConfirm:ne,blogTitle:((J=A.blog)==null?void 0:J.title)||"",isLoading:f===((q=A.blog)==null?void 0:q._id)})]})};export{Te as default};
//# sourceMappingURL=AdminDashboard-8129cd91.js.map
