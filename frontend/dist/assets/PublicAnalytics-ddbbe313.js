import{l as e,n as g,L as S,x as L,k as C,r as i,s as E,U}from"./index-f61b2bac.js";import{E as D,A as T,T as O,a as u}from"./TopPerformingBlogs-76132658.js";import{u as F}from"./user-37feea5f.js";import{E as v}from"./eye-87bbbeff.js";import{H as R,M as V}from"./message-circle-34117a2e.js";import{A as $}from"./arrow-left-1188ae0b.js";import{B as y}from"./bar-chart-3-9bfa9305.js";import{C as H}from"./calendar-482486aa.js";import{T as b}from"./trending-up-41dd6549.js";import"./share-2-a56b0603.js";import"./file-text-437e2c53.js";import"./clock-11a32587.js";const I=({data:r})=>{const n=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=t=>t>=10?"text-green-600 bg-green-50":t>=5?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50";return r.blogs.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Blog Performance"}),e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No published blogs available"})})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Blog Performance"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.blogs.length," published blogs"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Blog"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Views"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Likes"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Comments"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Engagement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Published"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.blogs.map((t,c)=>e.jsxs(g.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:c*.05},className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.title}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.readingTime," min read"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:t.metrics.views.toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:t.metrics.likes.toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-4 h-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:t.metrics.comments.toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded ${a(t.metrics.engagementRate)}`,children:[t.metrics.engagementRate.toFixed(1),"%"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:n(t.publishedAt)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(S,{to:`/blog/${t.slug}`,className:"text-gray-400 hover:text-blue-600 transition-colors",title:"View blog",children:e.jsx(D,{className:"w-4 h-4"})})})]},t._id))})]})})]})},ee=()=>{const{userId:r}=L(),n=C(),[a,t]=i.useState(null),[c,f]=i.useState(null),[s,N]=i.useState(null),[w,h]=i.useState(!0),[p,j]=i.useState(null),[x,k]=i.useState("overview");i.useEffect(()=>{(async()=>{var d,o;if(!r){j("User ID is required"),h(!1);return}try{h(!0);const m=await F.getUserProfile(r);N(m);const[B,P]=await Promise.all([u.getPublicUserAnalytics(r),u.getPublicUserBlogsAnalytics(r,{page:1,limit:10,sortBy:"views",sortOrder:"desc"})]);t(B),f(P)}catch(m){console.error("Error fetching public analytics:",m),j(((o=(d=m.response)==null?void 0:d.data)==null?void 0:o.message)||"Failed to load analytics data")}finally{h(!1)}})()},[r]);const A=l=>{k(l)};return w?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(E,{size:"lg"})}):p?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Error Loading Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:p}),e.jsx("button",{onClick:()=>n(-1),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx($,{className:"w-5 h-5"}),"Back"]}),e.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),e.jsx(y,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Public Analytics"}),s&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(U,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[s.name,"'s Blog Performance"]})]})]})]}),s&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.email}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsxs("span",{children:["Joined"," ",new Date(s.createdAt).toLocaleDateString()]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsxs("span",{children:[a.overview.totalBlogs," blogs"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsxs("span",{children:[a.overview.totalViews," views"]})]})]})]})]})]})})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg mb-8",children:[{key:"overview",label:"Overview",icon:b},{key:"blogs",label:"Blog Performance",icon:y}].map(({key:l,label:d,icon:o})=>e.jsxs("button",{onClick:()=>A(l),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${x===l?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(o,{className:"w-4 h-4"}),d]},l))}),e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[x==="overview"&&a&&e.jsxs("div",{className:"space-y-8",children:[e.jsx(T,{overview:a.overview}),a.topPerformingBlogs&&e.jsx(O,{blogs:a.topPerformingBlogs.slice(0,5)})]}),x==="blogs"&&c&&e.jsx(I,{data:c})]},x),a&&a.overview.totalBlogs===0&&e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(y,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Blog Data Available"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s==null?void 0:s.name," hasn't published any blogs yet."]})]})]})};export{ee as default};
//# sourceMappingURL=PublicAnalytics-ddbbe313.js.map
